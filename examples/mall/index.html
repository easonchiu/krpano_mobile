<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="yes" name="apple-touch-fullscreen">
	<meta content="telephone=no,email=no" name="format-detection">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui">
	<title>krpano</title>
	<style type="text/css">
		html, body, #pano {
			width: 100%;
			height: 100%;
			overflow: hidden;
			margin: 0;
		}
		#pano * {
			-webkit-transform-origin: 50% 50% !important;
		}
	</style>

	<link rel="stylesheet" type="text/css" href="details/css/reset.css">
	<link rel="stylesheet" type="text/css" href="details/css/style.css">

	<link rel="stylesheet" type="text/css" href="details/p/p1/p1.css">
	<link rel="stylesheet" type="text/css" href="details/p/p2/p2.css">
	<link rel="stylesheet" type="text/css" href="details/p/p3/p3.css">
	<link rel="stylesheet" type="text/css" href="details/p/p4/p4.css">
	<link rel="stylesheet" type="text/css" href="details/p/p5/p5.css">
	
</head>
<body ontouchstart>

	<div id="pano"></div>

	<script type="text/javascript" src="../../src/krpano.js"></script>
	<script type="text/javascript">
		embedpano({
            xml: './xml.xml',
            target: 'pano',
            html5: 'auto',
            mobilescale: 1,
            passQueryParameters: false,
            onready: function(){}
        });
	</script>


	<div class="details" id="details" v-cloak v-show="wantShow" style="display: none;">
		<header>
			<a href="javascript:;" class="back" v-touch:tap="closeit"></a>
			<h1>{{ title }}</h1>
			<a href="javascript:;" class="share"></a>
		</header>
		<main>

			<div class="base-info">
				<div class="pic">
					<div class="pic360" id="pic360"></div>
				</div>
				<h2>{{ title }}</h2>
				<p>{{ price | currency '¥' }}</p>
			</div>

			<article>
				<p>商品名称：{{ title }}</p>
				<p>商品编号：10763914141</p>
				<p>毛重：7.0kg</p>
				<p>商品产地：中国大陆</p>
				<p>货号：ZSG05064M</p>
				<p>材质：水晶</p>
				<p>风格：后现代奢华</p>
			</article>

		</main>
		<footer>
			<a href="javascript:;" class="l contact"><i></i><span>联系卖家</span></a>
			<a href="javascript:;" class="l love"><i></i><span>收藏</span></a>
			<a href="javascript:;" class="l shop"><i></i><span>店铺</span></a>
			<a href="javascript:;" class="add-cart"><i></i><span>加入购物车</span></a>
		</footer>
	</div>


	<script type="text/javascript" src="details/js/vue.js"></script>
	<script type="text/javascript" src="details/js/hammer.min.js"></script>
	<script type="text/javascript" src="details/js/vue.touch.js"></script>
	<script type="text/javascript" src="details/js/run360.js"></script>
	<script type="text/javascript">
		var details = new Vue({
			el: '#details',
			data: {
				title: '',
				price: 0,
				pic: '',
				wantShow: false,
				r: undefined,
			},
			methods: {
				closeit: function(){
					this.wantShow = false;
				},
				show(title, price, pic){
		        	this.title = title;
		        	this.price = price;
		        	this.pic = pic;
		        	this.wantShow = true;
		        }
			},
			watch: {
				pic: function(v, ov){
					if (this.r) {
						if (this.r.destroy) {
			        		this.r.destroy();
			        	}
					}
					var w = document.getElementById('pic360').parentNode.clientWidth;
					var s = w / 600;
					this.r = new run360({
				        el: document.getElementById('pic360'),
				        width: 600,
				        height: 600,
				        name: 'p' + v, // 图片名
				        count: 12, // 图片总数
				        current: 1, // 当前图片位置
				        scale: s, // 缩放
				        scaleRange: [0.5, 1.8],
				        angle: 1, // 总共视角
				        reverse: true, // 是否反方向运动
				    });
				    this.r.play();
				}
			}
		});
	</script>


</body>
</html>